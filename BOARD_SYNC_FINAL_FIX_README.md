# –§–∏–Ω–∞–ª—å–Ω–æ–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏ –∏ throttling

## –ü—Ä–æ–±–ª–µ–º—ã
1. **–£ –ª—é–¥–µ–π —Ä–∞–∑–Ω–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ –¥–æ—Å–∫–∏** - –Ω–µ—Å–º–æ—Ç—Ä—è –Ω–∞ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è, —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è –Ω–µ —Ä–∞–±–æ—Ç–∞–ª–∞
2. **Throttling –æ—à–∏–±–∫–∞ –ø—Ä–æ–¥–æ–ª–∂–∞–ª–∞ –ø–æ—è–≤–ª—è—Ç—å—Å—è** - "‚ö†Ô∏è Throttling: —Å–ª–∏—à–∫–æ–º —á–∞—Å—Ç—ã–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –¥–ª—è —É—Ä–æ–∫–∞ X, –ø—Ä–æ–ø—É—Å–∫–∞–µ–º"

## –ê–Ω–∞–ª–∏–∑ –ø—Ä–æ–±–ª–µ–º

### 1. –ü—Ä–æ–±–ª–µ–º–∞ —Å —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–µ–π:
- **–ë–ª–æ–∫–∏—Ä–æ–≤–∫–∞ –ª–æ–∫–∞–ª—å–Ω—ã—Ö –æ–±–Ω–æ–≤–ª–µ–Ω–∏–π** –∏–∑-–∑–∞ `isApplyingRemoteUpdate` —Ñ–ª–∞–≥–∞
- **–ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ** `lastRemoteUpdateTime`
- **–°–ª–∏—à–∫–æ–º –∫–æ—Ä–æ—Ç–∫–∏–π –∏–Ω—Ç–µ—Ä–≤–∞–ª –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏** (50ms) –Ω–µ –ø–æ–∑–≤–æ–ª—è–ª –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –ø—Ä–∏–º–µ–Ω—è—Ç—å —É–¥–∞–ª–µ–Ω–Ω—ã–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è

### 2. –ü—Ä–æ–±–ª–µ–º–∞ —Å throttling:
- **–ö–æ–Ω—Ñ–ª–∏–∫—Ç –º–µ–∂–¥—É —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–æ–º –∏ –±—ç–∫–µ–Ω–¥–æ–º** - —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥ –æ—Ç–ø—Ä–∞–≤–ª—è–ª –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –∫–∞–∂–¥—ã–µ 200ms, –∞ –±—ç–∫–µ–Ω–¥ –±–ª–æ–∫–∏—Ä–æ–≤–∞–ª –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è —á–∞—â–µ —á–µ–º —Ä–∞–∑ –≤ 1000ms
- **–°–ª–∏—à–∫–æ–º –∞–≥—Ä–µ—Å—Å–∏–≤–Ω—ã–π throttling** –Ω–∞ –±—ç–∫–µ–Ω–¥–µ
- **–ú–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ —Ç—Ä–∏–≥–≥–µ—Ä—ã** –æ—Ç–ø—Ä–∞–≤–∫–∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–π

## –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è

### 1. –§—Ä–æ–Ω—Ç–µ–Ω–¥ (excalidraw-board.html)

#### –û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω throttling:
- ‚úÖ **–£–≤–µ–ª–∏—á–µ–Ω –∏–Ω—Ç–µ—Ä–≤–∞–ª throttling** —Å 50ms –¥–æ 200ms –≤ `handleExcalidrawChange`
- ‚úÖ **–£–≤–µ–ª–∏—á–µ–Ω—ã –∏–Ω—Ç–µ—Ä–≤–∞–ª—ã** –≤ event handlers:
  - `onPointerUp`: 100ms ‚Üí 300ms
  - `onTextSubmit`: 100ms ‚Üí 300ms  
  - `onResize`: 200ms ‚Üí 500ms

#### –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∞ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è:
- ‚úÖ **–£–º–µ–Ω—å—à–µ–Ω –∏–Ω—Ç–µ—Ä–≤–∞–ª –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏** —Å 50ms –¥–æ 20ms –ø–æ—Å–ª–µ —É–¥–∞–ª–µ–Ω–Ω—ã—Ö –æ–±–Ω–æ–≤–ª–µ–Ω–∏–π
- ‚úÖ **–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–æ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ** `lastRemoteUpdateTime` –ø—Ä–∏ –ø—Ä–∏–º–µ–Ω–µ–Ω–∏–∏ —É–¥–∞–ª–µ–Ω–Ω—ã—Ö –æ–±–Ω–æ–≤–ª–µ–Ω–∏–π
- ‚úÖ **–î–æ–±–∞–≤–ª–µ–Ω–æ –¥–µ—Ç–∞–ª—å–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ** –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏

#### –£–ª—É—á—à–µ–Ω–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∞ —Å–æ–æ–±—â–µ–Ω–∏–π:
- ‚úÖ **–î–æ–±–∞–≤–ª–µ–Ω–æ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ** –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ —ç–ª–µ–º–µ–Ω—Ç–æ–≤ –≤ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è—Ö
- ‚úÖ **–£–ª—É—á—à–µ–Ω–∞ –æ—Ç–ª–∞–¥–∫–∞** –ø—Ä–æ—Ü–µ—Å—Å–∞ –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏–π

### 2. –ë—ç–∫–µ–Ω–¥ (BoardService.java)

#### –û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω throttling:
- ‚úÖ **–£–º–µ–Ω—å—à–µ–Ω –∏–Ω—Ç–µ—Ä–≤–∞–ª throttling** —Å 1000ms –¥–æ 100ms
- ‚úÖ **–°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è —Å —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–æ–º** - –±—ç–∫–µ–Ω–¥ —Ç–µ–ø–µ—Ä—å –ø—Ä–∏–Ω–∏–º–∞–µ—Ç –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –∫–∞–∂–¥—ã–µ 100ms

## –ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞

### –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏:
1. **–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —Ä–∏—Å—É–µ—Ç** ‚Üí `handleExcalidrawChange` –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è
2. **–ü—Ä–æ–≤–µ—Ä—è–µ—Ç—Å—è throttling** ‚Üí –µ—Å–ª–∏ –ø—Ä–æ—à–ª–æ < 200ms, –æ—Ç–ø—Ä–∞–≤–∫–∞ –æ—Ç–∫–ª–∞–¥—ã–≤–∞–µ—Ç—Å—è
3. **–û—Ç–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ** ‚Üí —Å–µ—Ä–≤–µ—Ä –ø—Ä–æ–≤–µ—Ä—è–µ—Ç throttling (100ms)
4. **–°–µ—Ä–≤–µ—Ä —Ä–∞—Å—Å—ã–ª–∞–µ—Ç** –≤—Å–µ–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º
5. **–î—Ä—É–≥–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –ø–æ–ª—É—á–∞—é—Ç** ‚Üí `handleExcalidrawMessage` –ø—Ä–∏–º–µ–Ω—è–µ—Ç –∏–∑–º–µ–Ω–µ–Ω–∏—è
6. **–ö–æ—Ä–æ—Ç–∫–∞—è –±–ª–æ–∫–∏—Ä–æ–≤–∫–∞** (20ms) –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–∞–µ—Ç –∫–æ–Ω—Ñ–ª–∏–∫—Ç—ã
7. **–ò–∑–º–µ–Ω–µ–Ω–∏—è –≤–∏–¥–Ω—ã –º–≥–Ω–æ–≤–µ–Ω–Ω–æ** ‚úÖ

### –ò–Ω—Ç–µ–ª–ª–µ–∫—Ç—É–∞–ª—å–Ω—ã–π throttling:
- **–§—Ä–æ–Ω—Ç–µ–Ω–¥**: –º–∏–Ω–∏–º—É–º 200ms –º–µ–∂–¥—É –æ—Ç–ø—Ä–∞–≤–∫–∞–º–∏
- **–ë—ç–∫–µ–Ω–¥**: –º–∏–Ω–∏–º—É–º 100ms –º–µ–∂–¥—É —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è–º–∏
- **Event handlers**: —É–≤–µ–ª–∏—á–µ–Ω–Ω—ã–µ –∏–Ω—Ç–µ—Ä–≤–∞–ª—ã –¥–ª—è –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–µ–Ω–∏—è —Å–ø–∞–º–∞
- **–ù–µ—Ç –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏** —Å–µ—Ä–≤–µ—Ä–∞ ‚úÖ

## –û–∂–∏–¥–∞–µ–º–æ–µ –ø–æ–≤–µ–¥–µ–Ω–∏–µ –ø–æ—Å–ª–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è

### ‚úÖ –ú–≥–Ω–æ–≤–µ–Ω–Ω–∞—è —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è:
- **–ò–∑–º–µ–Ω–µ–Ω–∏—è –æ—Ç –¥—Ä—É–≥–∏—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –≤–∏–¥–Ω—ã —Å—Ä–∞–∑—É** –±–µ–∑ –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–∏
- **–ù–µ—Ç –∑–∞–¥–µ—Ä–∂–µ–∫** –≤ –ø–µ—Ä–µ–¥–∞—á–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–π
- **–ö–æ–Ω—Å–∏—Å—Ç–µ–Ω—Ç–Ω–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ** —É –≤—Å–µ—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π

### ‚úÖ –ù–µ—Ç throttling –æ—à–∏–±–æ–∫:
- **–°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –∏–Ω—Ç–µ—Ä–≤–∞–ª—ã** –º–µ–∂–¥—É —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–æ–º –∏ –±—ç–∫–µ–Ω–¥–æ–º
- **–û–ø—Ç–∏–º–∞–ª—å–Ω–∞—è —á–∞—Å—Ç–æ—Ç–∞** –æ—Ç–ø—Ä–∞–≤–∫–∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–π
- **–ü–ª–∞–≤–Ω–∞—è —Ä–∞–±–æ—Ç–∞** –ø—Ä–∏ –∞–∫—Ç–∏–≤–Ω–æ–º —Ä–∏—Å–æ–≤–∞–Ω–∏–∏

### ‚úÖ –£–ª—É—á—à–µ–Ω–Ω–∞—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å:
- **–ú–µ–Ω—å—à–µ —Å–µ—Ç–µ–≤–æ–≥–æ —Ç—Ä–∞—Ñ–∏–∫–∞** –±–ª–∞–≥–æ–¥–∞—Ä—è –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω–æ–º—É throttling
- **–ë—ã—Å—Ç—Ä–∞—è –æ—Ç–∑—ã–≤—á–∏–≤–æ—Å—Ç—å** –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞
- **–°—Ç–∞–±–∏–ª—å–Ω–∞—è —Ä–∞–±–æ—Ç–∞** –ø—Ä–∏ –º–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è—Ö

## –õ–æ–≥–∏ –¥–ª—è –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞

### –£—Å–ø–µ—à–Ω—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏:
- ‚úÖ `üì® Excalidraw board message received: board_update from: UserName`
- ‚úÖ `üìã Board update from other user: UserName elements: X`
- ‚úÖ `üîÑ Applying board update from UserName`
- ‚úÖ `‚úÖ Board update applied successfully with X elements`
- ‚úÖ `üîÑ Updated lastRemoteUpdateTime to: X`

### –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è:
- üîÑ `üîÑ Skipping local update - applying remote update`
- ‚ö° `‚ö° THROTTLED sync sent with X elements`
- ‚ö° `‚ö° INSTANT sync sent with X elements`

### –û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –æ—à–∏–±–æ–∫:
- ‚ùå –ë–æ–ª—å—à–µ –Ω–µ—Ç `‚ö†Ô∏è Throttling: —Å–ª–∏—à–∫–æ–º —á–∞—Å—Ç—ã–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è`

## –§–∞–π–ª—ã –∏–∑–º–µ–Ω–µ–Ω—ã:
- `src/main/resources/templates/excalidraw-board.html`
- `src/main/java/com/example/brainify/Service/BoardService.java`

## –°—Ç–∞—Ç—É—Å: ‚úÖ –ò–°–ü–†–ê–í–õ–ï–ù–û
–ü—Ä–æ–±–ª–µ–º—ã —Å —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–µ–π –∏ throttling –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å –ø–æ–ª–Ω–æ—Å—Ç—å—é —É—Å—Ç—Ä–∞–Ω–µ–Ω—ã. –¢–µ–ø–µ—Ä—å:
- –ò–∑–º–µ–Ω–µ–Ω–∏—è –æ—Ç –¥—Ä—É–≥–∏—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –±—É–¥—É—Ç –≤–∏–¥–Ω—ã –º–≥–Ω–æ–≤–µ–Ω–Ω–æ
- –û—à–∏–±–∫–∏ throttling –∏—Å—á–µ–∑–Ω—É—Ç
- –°–∏—Å—Ç–µ–º–∞ –±—É–¥–µ—Ç —Ä–∞–±–æ—Ç–∞—Ç—å —Å—Ç–∞–±–∏–ª—å–Ω–æ –ø—Ä–∏ –º–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è—Ö
