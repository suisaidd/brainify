# –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –æ—à–∏–±–∫–∏ —Å–æ–∑–¥–∞–Ω–∏—è —É—Ä–æ–∫–æ–≤

## üêõ **–ü—Ä–æ–±–ª–µ–º–∞:**
```
–û—à–∏–±–∫–∞ —Å–æ–∑–¥–∞–Ω–∏—è —É—Ä–æ–∫–æ–≤: Cannot invoke "Object.toString()" because the return value of "java.util.Map.get(Object)" is null
```

## üîç **–ü—Ä–∏—á–∏–Ω–∞ –æ—à–∏–±–∫–∏:**
–í –º–µ—Ç–æ–¥–∞—Ö `createLessons` –∏ `createLessonsByDates` –º—ã –ø—ã—Ç–∞–ª–∏—Å—å –ø–æ–ª—É—á–∏—Ç—å `teacherId` –∏–∑ –∑–∞–ø—Ä–æ—Å–∞:
```java
Long teacherId = Long.valueOf(request.get("teacherId").toString());
```

–ù–æ –≤ –Ω–æ–≤–æ–º –ø–æ–¥—Ö–æ–¥–µ —Å –ø—Ä–µ–¥–º–µ—Ç–∞–º–∏ —É—á–µ–Ω–∏–∫–∞ –º—ã –Ω–µ –ø–µ—Ä–µ–¥–∞–µ–º `teacherId` –≤ –∑–∞–ø—Ä–æ—Å–µ, –ø–æ—ç—Ç–æ–º—É `request.get("teacherId")` –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç `null`, –∏ –ø—Ä–∏ –≤—ã–∑–æ–≤–µ `.toString()` –≤–æ–∑–Ω–∏–∫–∞–µ—Ç –æ—à–∏–±–∫–∞.

## ‚úÖ **–†–µ—à–µ–Ω–∏–µ:**

### **1. –£–±—Ä–∞–ª–∏ –ø–æ–ª—É—á–µ–Ω–∏–µ teacherId –∏–∑ –∑–∞–ø—Ä–æ—Å–∞:**
```java
// –ë–´–õ–û:
Long teacherId = Long.valueOf(request.get("teacherId").toString());

// –°–¢–ê–õ–û:
// teacherId –±–æ–ª—å—à–µ –Ω–µ –ø–æ–ª—É—á–∞–µ–º –∏–∑ –∑–∞–ø—Ä–æ—Å–∞
```

### **2. –î–æ–±–∞–≤–∏–ª–∏ –ø–æ–ª—É—á–µ–Ω–∏–µ –ø—Ä–µ–ø–æ–¥–∞–≤–∞—Ç–µ–ª—è —á–µ—Ä–µ–∑ –Ω–∞–∑–Ω–∞—á–µ–Ω–∏–µ:**
```java
// –ü–æ–ª—É—á–∞–µ–º –Ω–∞–∑–Ω–∞—á–µ–Ω–Ω–æ–≥–æ –ø—Ä–µ–ø–æ–¥–∞–≤–∞—Ç–µ–ª—è –¥–ª—è –¥–∞–Ω–Ω–æ–≥–æ –ø—Ä–µ–¥–º–µ—Ç–∞
StudentTeacher assignment = studentTeacherRepository.findActiveByStudentAndSubject(student, subject).orElse(null);
if (assignment == null) {
    return ResponseEntity.ok(Map.of("status", "error", "message", "–ù–µ –Ω–∞–∑–Ω–∞—á–µ–Ω –ø—Ä–µ–ø–æ–¥–∞–≤–∞—Ç–µ–ª—å –¥–ª—è –¥–∞–Ω–Ω–æ–≥–æ –ø—Ä–µ–¥–º–µ—Ç–∞"));
}

User teacher = assignment.getTeacher();
```

### **3. –û–±–Ω–æ–≤–∏–ª–∏ –ø—Ä–æ–≤–µ—Ä–∫–∏:**
```java
// –ë–´–õ–û:
if (student == null || teacher == null || subject == null) {
    return ResponseEntity.ok(Map.of("status", "error", "message", "–ù–µ –Ω–∞–π–¥–µ–Ω—ã —Å—Ç—É–¥–µ–Ω—Ç, –ø—Ä–µ–ø–æ–¥–∞–≤–∞—Ç–µ–ª—å –∏–ª–∏ –ø—Ä–µ–¥–º–µ—Ç"));
}

// –°–¢–ê–õ–û:
if (student == null || subject == null) {
    return ResponseEntity.ok(Map.of("status", "error", "message", "–ù–µ –Ω–∞–π–¥–µ–Ω—ã —Å—Ç—É–¥–µ–Ω—Ç –∏–ª–∏ –ø—Ä–µ–¥–º–µ—Ç"));
}
```

## üîß **–ò–∑–º–µ–Ω–µ–Ω–∏—è –≤ –∫–æ–¥–µ:**

### **–ú–µ—Ç–æ–¥ `createLessons`:**
```java
@PostMapping("/api/create-lessons")
@ResponseBody
@Transactional
public ResponseEntity<Map<String, Object>> createLessons(
        @RequestBody Map<String, Object> request,
        HttpSession session) {
    
    try {
        Long studentId = Long.valueOf(request.get("studentId").toString());
        Long subjectId = Long.valueOf(request.get("subjectId").toString());
        @SuppressWarnings("unchecked")
        List<String> selectedSlots = (List<String>) request.get("selectedSlots");
        Boolean repeatWeekly = (Boolean) request.get("repeatWeekly");
        Integer recurrenceWeeks = (Integer) request.get("recurrenceWeeks");

        User student = userRepository.findById(studentId).orElse(null);
        Subject subject = subjectRepository.findById(subjectId).orElse(null);

        if (student == null || subject == null) {
            return ResponseEntity.ok(Map.of("status", "error", "message", "–ù–µ –Ω–∞–π–¥–µ–Ω—ã —Å—Ç—É–¥–µ–Ω—Ç –∏–ª–∏ –ø—Ä–µ–¥–º–µ—Ç"));
        }

        // –ü–æ–ª—É—á–∞–µ–º –Ω–∞–∑–Ω–∞—á–µ–Ω–Ω–æ–≥–æ –ø—Ä–µ–ø–æ–¥–∞–≤–∞—Ç–µ–ª—è –¥–ª—è –¥–∞–Ω–Ω–æ–≥–æ –ø—Ä–µ–¥–º–µ—Ç–∞
        StudentTeacher assignment = studentTeacherRepository.findActiveByStudentAndSubject(student, subject).orElse(null);
        if (assignment == null) {
            return ResponseEntity.ok(Map.of("status", "error", "message", "–ù–µ –Ω–∞–∑–Ω–∞—á–µ–Ω –ø—Ä–µ–ø–æ–¥–∞–≤–∞—Ç–µ–ª—å –¥–ª—è –¥–∞–Ω–Ω–æ–≥–æ –ø—Ä–µ–¥–º–µ—Ç–∞"));
        }
        
        User teacher = assignment.getTeacher();
        
        // ... –æ—Å—Ç–∞–ª—å–Ω–∞—è –ª–æ–≥–∏–∫–∞ —Å–æ–∑–¥–∞–Ω–∏—è —É—Ä–æ–∫–æ–≤
    }
}
```

### **–ú–µ—Ç–æ–¥ `createLessonsByDates`:**
–ê–Ω–∞–ª–æ–≥–∏—á–Ω—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è –ø—Ä–∏–º–µ–Ω–µ–Ω—ã –∫ –º–µ—Ç–æ–¥—É `createLessonsByDates`.

## üìä **–õ–æ–≥–∏–∫–∞ —Ä–∞–±–æ—Ç—ã:**

### **–ù–æ–≤—ã–π –ø—Ä–æ—Ü–µ—Å—Å —Å–æ–∑–¥–∞–Ω–∏—è —É—Ä–æ–∫–æ–≤:**
1. **–ü–æ–ª—É—á–∞–µ–º studentId –∏ subjectId** –∏–∑ –∑–∞–ø—Ä–æ—Å–∞
2. **–ù–∞—Ö–æ–¥–∏–º —Å—Ç—É–¥–µ–Ω—Ç–∞ –∏ –ø—Ä–µ–¥–º–µ—Ç** –≤ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö
3. **–ü–æ–ª—É—á–∞–µ–º –Ω–∞–∑–Ω–∞—á–µ–Ω–Ω–æ–≥–æ –ø—Ä–µ–ø–æ–¥–∞–≤–∞—Ç–µ–ª—è** —á–µ—Ä–µ–∑ —Ç–∞–±–ª–∏—Ü—É `student_teacher`
4. **–ü—Ä–æ–≤–µ—Ä—è–µ–º –Ω–∞–∑–Ω–∞—á–µ–Ω–∏–µ** - –µ—Å–ª–∏ –ø—Ä–µ–ø–æ–¥–∞–≤–∞—Ç–µ–ª—å –Ω–µ –Ω–∞–∑–Ω–∞—á–µ–Ω, –≤–æ–∑–≤—Ä–∞—â–∞–µ–º –æ—à–∏–±–∫—É
5. **–°–æ–∑–¥–∞–µ–º —É—Ä–æ–∫–∏** —Å –ø–æ–ª—É—á–µ–Ω–Ω—ã–º –ø—Ä–µ–ø–æ–¥–∞–≤–∞—Ç–µ–ª–µ–º

### **–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ –Ω–æ–≤–æ–≥–æ –ø–æ–¥—Ö–æ–¥–∞:**
- ‚úÖ **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –ø–æ–ª—É—á–µ–Ω–∏–µ –ø—Ä–µ–ø–æ–¥–∞–≤–∞—Ç–µ–ª—è** - –Ω–µ –Ω—É–∂–Ω–æ –ø–µ—Ä–µ–¥–∞–≤–∞—Ç—å teacherId
- ‚úÖ **–ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞–∑–Ω–∞—á–µ–Ω–∏—è** - —É–±–µ–∂–¥–∞–µ–º—Å—è, —á—Ç–æ –ø—Ä–µ–ø–æ–¥–∞–≤–∞—Ç–µ–ª—å –Ω–∞–∑–Ω–∞—á–µ–Ω
- ‚úÖ **–õ–æ–≥–∏—á–µ—Å–∫–∞—è —Å–≤—è–∑–Ω–æ—Å—Ç—å** - —É—Ä–æ–∫–∏ —Å–æ–∑–¥–∞—é—Ç—Å—è —Ç–æ–ª—å–∫–æ –¥–ª—è –Ω–∞–∑–Ω–∞—á–µ–Ω–Ω—ã—Ö –ø—Ä–µ–ø–æ–¥–∞–≤–∞—Ç–µ–ª–µ–π
- ‚úÖ **–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å** - –Ω–µ–ª—å–∑—è —Å–æ–∑–¥–∞—Ç—å —É—Ä–æ–∫ —Å –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–º –ø—Ä–µ–ø–æ–¥–∞–≤–∞—Ç–µ–ª–µ–º

## üéØ **–†–µ–∑—É–ª—å—Ç–∞—Ç:**

- ‚úÖ **–û—à–∏–±–∫–∞ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∞** - –±–æ–ª—å—à–µ –Ω–µ—Ç NullPointerException
- ‚úÖ **–õ–æ–≥–∏–∫–∞ —É–ø—Ä–æ—â–µ–Ω–∞** - –Ω–µ –Ω—É–∂–Ω–æ –ø–µ—Ä–µ–¥–∞–≤–∞—Ç—å teacherId
- ‚úÖ **–ü—Ä–æ–≤–µ—Ä–∫–∏ –¥–æ–±–∞–≤–ª–µ–Ω—ã** - –∫–æ–Ω—Ç—Ä–æ–ª—å –Ω–∞–∑–Ω–∞—á–µ–Ω–∏—è –ø—Ä–µ–ø–æ–¥–∞–≤–∞—Ç–µ–ª—è
- ‚úÖ **–ö–æ–¥ —Å—Ç–∞–ª –Ω–∞–¥–µ–∂–Ω–µ–µ** - –º–µ–Ω—å—à–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–µ–π –¥–ª—è –æ—à–∏–±–æ–∫

## üöÄ **–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ:**

–¢–µ–ø–µ—Ä—å –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ —É—Ä–æ–∫–æ–≤ —Å–∏—Å—Ç–µ–º–∞:
1. ‚úÖ –ü—Ä–æ–≤–µ—Ä—è–µ—Ç —Å—É—â–µ—Å—Ç–≤–æ–≤–∞–Ω–∏–µ —Å—Ç—É–¥–µ–Ω—Ç–∞ –∏ –ø—Ä–µ–¥–º–µ—Ç–∞
2. ‚úÖ –ù–∞—Ö–æ–¥–∏—Ç –Ω–∞–∑–Ω–∞—á–µ–Ω–Ω–æ–≥–æ –ø—Ä–µ–ø–æ–¥–∞–≤–∞—Ç–µ–ª—è
3. ‚úÖ –ü—Ä–æ–≤–µ—Ä—è–µ—Ç –Ω–∞–ª–∏—á–∏–µ –Ω–∞–∑–Ω–∞—á–µ–Ω–∏—è
4. ‚úÖ –°–æ–∑–¥–∞–µ—Ç —É—Ä–æ–∫–∏ —Å –ø—Ä–∞–≤–∏–ª—å–Ω—ã–º –ø—Ä–µ–ø–æ–¥–∞–≤–∞—Ç–µ–ª–µ–º
5. ‚úÖ –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç –ø–æ–Ω—è—Ç–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è –æ–± –æ—à–∏–±–∫–∞—Ö

---

*–û—à–∏–±–∫–∞ —Å–æ–∑–¥–∞–Ω–∏—è —É—Ä–æ–∫–æ–≤ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∞ –¥–ª—è —Å–∏—Å—Ç–µ–º—ã Brainify* 