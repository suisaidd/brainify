# Система онлайн-уроков Brainify

## Обзор

Система онлайн-уроков Brainify предоставляет собственную платформу для проведения видеоконференций и интерактивных уроков. Система включает в себя:

- **Интерактивную доску** - собственная реализация с возможностью рисования, выбора инструментов и цветов
- **Видеоконференцию** - перемещаемое окно с видео участников
- **Проверку оборудования** - автоматическая проверка камеры, микрофона и интернет-соединения

## Архитектура

### Компоненты

1. **Frontend (HTML/CSS/JavaScript)**
   - `online-lesson.html` - основная страница урока
   - `online-lesson.css` - стили для интерфейса
   - `online-lesson.js` - логика клиентской части

2. **Backend (Java/Spring)**
   - `OnlineLessonController` - контроллер для API
   - `OnlineLessonService` - бизнес-логика
   - `OnlineLessonSession` - модель данных сессии

3. **База данных**
   - Таблица `online_lesson_sessions` для хранения сессий

### Поток работы

1. **Проверка оборудования**
   - Автоматическая проверка камеры и микрофона
   - Проверка интернет-соединения
   - Проверка совместимости браузера

2. **Подключение к уроку**
   - Создание или получение сессии
   - Инициализация доски
   - Инициализация видеоконференции

3. **Проведение урока**
   - Рисование на доске
   - Видеосвязь в перемещаемом окне
   - Сохранение содержимого доски

## Функциональность

### Интерактивная доска

- **Инструменты**: ручка, ластик, текст, фигуры
- **Настройки**: выбор цвета, размер кисти
- **Действия**: очистка, сохранение, полноэкранный режим
- **Совместимость**: поддержка мыши и касаний

### Видеоконференция

- **Перемещаемое окно** - можно перетаскивать по экрану
- **Управление**: включение/выключение камеры и микрофона
- **Минимизация** - возможность скрыть окно
- **Локальное видео** - отображение собственного видео

### Проверка оборудования

- **Камера**: проверка доступа и качества
- **Микрофон**: проверка доступа и активности
- **Интернет**: тестирование соединения
- **Браузер**: проверка совместимости

## API Endpoints

### GET `/online-lesson`
Страница онлайн-урока с параметром `lessonId`

### GET `/api/lessons/{lessonId}/online-data`
Получение данных урока для онлайн-урока

### POST `/api/lessons/{lessonId}/end`
Завершение онлайн-урока

### GET `/api/lessons/{lessonId}/online-status`
Получение статуса онлайн-урока

### GET `/api/health`
Проверка состояния сервиса

## Установка и запуск

1. **Запуск приложения**
   ```bash
   cd brainify
   mvn spring-boot:run
   ```

2. **Миграция базы данных**
   ```sql
   -- Выполнить файл online-lesson-sessions-migration.sql
   ```

3. **Доступ к системе**
   - Открыть `http://localhost:8082`
   - Войти в систему
   - Перейти к уроку и нажать "Подключиться к уроку"

## Технические требования

### Браузеры
- Chrome 80+
- Firefox 75+
- Safari 13+
- Edge 80+

### Устройства
- Камера (для видеосвязи)
- Микрофон (для аудиосвязи)
- Стабильное интернет-соединение

## Безопасность

- Проверка прав доступа к урокам
- Валидация данных на сервере
- Защита от XSS и CSRF атак
- Безопасное хранение сессий

## Будущие улучшения

1. **WebRTC для видеосвязи**
   - P2P соединения между участниками
   - Поддержка нескольких участников
   - Улучшенное качество видео

2. **Расширенные инструменты доски**
   - Математические формулы
   - Геометрические фигуры
   - Загрузка изображений

3. **Запись уроков**
   - Сохранение видео урока
   - Экспорт содержимого доски
   - История уроков

4. **Интеграции**
   - Google Calendar
   - Email уведомления
   - Мобильное приложение
